<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Eksklusiv Portefølje</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Header med mørk baggrund og hvid tekst som på index.html */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; background: #f5f9fc; color: #0b1e3d;
    }
    header {
      background-color: #003f5c; /* Mørk blå baggrund */
      padding: 20px 15px;
      text-align: center;
      box-shadow: none;
    }
    header h1 {
      color: white;
      font-weight: 700;
      font-size: 2.5rem;
      margin: 0;
      letter-spacing: 0.1em;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    main {
      max-width: 900px;
      margin: 40px auto 80px;
      padding: 0 15px;
    }

    /* Grafik container */
    #chartWrapper {
      background: white;
      padding: 20px 30px 30px;
      border-radius: 8px;
      box-shadow: 0 5px 12px rgb(11 30 61 / 0.1);
      margin-bottom: 40px;
    }

    canvas {
      max-height: 350px;
    }

    /* Pros liste */
    #proContainer {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
      gap: 24px;
    }
    .pro-card {
      background: white;
      border-radius: 8px;
      padding: 20px 22px;
      box-shadow: 0 2px 8px rgb(11 30 61 / 0.05);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .pro-name {
      font-weight: 700;
      font-size: 1.3rem;
      margin-bottom: 12px;
      color: #2f4b7c;
    }
    .stocks-list {
      list-style: none;
      padding-left: 0;
      margin: 0 0 16px 0;
    }
    .stocks-list li {
      font-size: 0.95rem;
      margin-bottom: 6px;
      color: #556b8b;
      display: flex;
      justify-content: space-between;
    }
    .stock-name {
      font-weight: 600;
      color: #0b1e3d;
    }
    .afkast {
      font-style: italic;
      color: #8fbcbb;
    }
    .analysis-btn {
      background: #003f5c;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 9px 14px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s ease;
      align-self: flex-start;
    }
    .analysis-btn:hover,
    .analysis-btn:focus {
      background: #2f4b7c;
      outline: none;
    }

    /* Modal styles */
    #modalOverlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(11,30,61,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      padding: 20px;
      z-index: 9999;
    }
    #modalOverlay.active {
      display: flex;
    }
    #modalContent {
      background: white;
      max-width: 680px;
      max-height: 80vh;
      overflow-y: auto;
      padding: 24px 30px;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgb(11 30 61 / 0.2);
      position: relative;
      outline: none;
    }
    #modalCloseBtn {
      position: absolute;
      top: 14px;
      right: 20px;
      font-size: 26px;
      background: none;
      border: none;
      cursor: pointer;
      color: #8fbcbb;
      font-weight: 700;
      transition: color 0.2s ease;
    }
    #modalCloseBtn:hover,
    #modalCloseBtn:focus {
      color: #003f5c;
      outline: none;
    }
    #modalTitle {
      margin-top: 0;
      font-weight: 700;
      color: #003f5c;
      margin-bottom: 16px;
      font-size: 1.8rem;
      border-bottom: 2px solid #8fbcbb;
      padding-bottom: 6px;
    }
    .analysis-section {
      margin-bottom: 22px;
    }
    .analysis-section h3 {
      color: #2f4b7c;
      margin-bottom: 8px;
      font-weight: 700;
      font-size: 1.2rem;
    }
    .analysis-section p {
      line-height: 1.5;
      color: #556b8b;
      font-size: 1rem;
    }
  </style>
</head>
<body>

<header>
  <h1>Eksklusiv Portefølje</h1>
</header>

<main>
  <section id="chartWrapper">
    <canvas id="portfolioChart" aria-label="Porteføljens samlede værdi over 12 uger" role="img"></canvas>
  </section>

  <section id="proContainer" aria-live="polite" aria-label="Investorer og deres aktier">
    <!-- Pros bliver indsat her via JS -->
  </section>
</main>

<!-- Modal -->
<div id="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" tabindex="-1">
  <div id="modalContent">
    <button id="modalCloseBtn" aria-label="Luk analyse modal">&times;</button>
    <h2 id="modalTitle">Analyse</h2>
    <div id="modalText"></div>
  </div>
</div>

<script>
  // Eksempel-data for investorer og aktier (med analyser)
  const pros = [
    {
      name: "Peter Nielsen",
      analysis: `
        <div class="analysis-section">
          <p>Jeg har valgt en portefølje med en god balance mellem teknologi og stabile forbrugsselskaber for at sprede risikoen og sikre et solidt afkast over tid.</p>
        </div>
        <div class="analysis-section">
          <h3>Microsoft</h3>
          <p>Microsoft har en stærk position inden for cloud computing og software, hvilket gør dem til en robust aktie med vedvarende vækstpotentiale. Virksomheden har en diversificeret produktportefølje og klarer sig godt i både enterprise- og forbrugermarkederne.</p>
        </div>
        <div class="analysis-section">
          <h3>Coloplast</h3>
          <p>Coloplast er en førende aktør inden for medicinsk udstyr med fokus på innovative løsninger til kroniske sygdomme. Deres produkter har høj efterspørgsel globalt, og de nyder godt af demografiske trends og stigende sundhedsudgifter.</p>
        </div>
      `,
      stocks: [
        { name: "Microsoft", afkast: 0.10 },
        { name: "Coloplast", afkast: 0.07 }
      ]
    },
    {
      name: "Mette Hansen",
      analysis: `
        <div class="analysis-section">
          <p>Jeg vælger vækstaktier inden for teknologi og vedvarende energi, da jeg forventer stor innovationskraft og øget fokus på bæredygtighed fremover.</p>
        </div>
        <div class="analysis-section">
          <h3>Alphabet (Google)</h3>
          <p>Alphabet dominerer inden for søgning og digital annoncering, og deres massive investeringer i AI og cloud kan åbne nye indtjeningsmuligheder. Aktiens værdi er stadig attraktiv i forhold til det langsigtede vækstpotentiale.</p>
        </div>
        <div class="analysis-section">
          <h3>Vestas</h3>
          <p>Vestas er en af verdens største producenter af vindmøller, hvilket placerer dem godt i den grønne omstilling. Efterspørgslen på vedvarende energi stiger globalt, og Vestas har gode muligheder for at øge sin markedsandel.</p>
        </div>
      `,
      stocks: [
        { name: "Alphabet", afkast: 0.14 },
        { name: "Vestas", afkast: 0.08 }
      ]
    },
    {
      name: "Thomas Kristensen",
      analysis: `
        <div class="analysis-section">
          <p>Jeg satser på stabile industrivirksomheder, som giver en sikker base med gode udbytter og stabil indtjening i både gode og dårlige tider.</p>
        </div>
        <div class="analysis-section">
          <h3>A.P. Møller - Mærsk</h3>
          <p>Mærsk har en stærk position i global shipping og logistik, som sikrer stabilitet trods konjunkturudsving. Virksomheden har investeret i digitalisering og bæredygtige løsninger.</p>
        </div>
        <div class="analysis-section">
          <h3>Novozymes</h3>
          <p>Novozymes er førende inden for enzymer og bioteknologi med fokus på bæredygtige løsninger. Deres produkter understøtter grøn omstilling i industrien og landbruget.</p>
        </div>
      `,
      stocks: [
        { name: "A.P. Møller - Mærsk", afkast: 0.06 },
        { name: "Novozymes", afkast: 0.09 }
      ]
    },
    {
      name: "Sofie Larsen",
      analysis: `
        <div class="analysis-section">
          <p>Jeg foretrækker innovative selskaber inden for sundhedsteknologi og digitale løsninger, der kan revolutionere deres markeder.</p>
        </div>
        <div class="analysis-section">
          <h3>Ambu</h3>
          <p>Ambu udvikler avancerede medicinske enheder og har en stærk pipeline af produkter med stort vækstpotentiale.</p>
        </div>
        <div class="analysis-section">
          <h3>Demant</h3>
          <p>Demant er global leder inden for høreapparater og høreteknologi, hvilket giver gode langsigtede muligheder i et voksende marked.</p>
        </div>
      `,
      stocks: [
        { name: "Ambu", afkast: 0.12 },
        { name: "Demant", afkast: 0.07 }
      ]
    },
    {
      name: "Martin Pedersen",
      analysis: `
        <div class="analysis-section">
          <p>Jeg satser på finanssektoren, hvor jeg ser attraktive udbytter og potentiale for digital transformation.</p>
        </div>
        <div class="analysis-section">
          <h3>Danske Bank</h3>
          <p>Danske Bank arbejder på at styrke sin digitale platform og øge effektiviteten, hvilket kan give øget indtjening fremover.</p>
        </div>
        <div class="analysis-section">
          <h3>Jyske Bank</h3>
          <p>Jyske Bank har fokus på kundeoplevelse og bæredygtige investeringer, hvilket styrker deres position i markedet.</p>
        </div>
      `,
      stocks: [
        { name: "Danske Bank", afkast: 0.05 },
        { name: "Jyske Bank", afkast: 0.06 }
      ]
    }
  ];

  // Funktion til at formatere procent til streng med 2 decimaler
  function formatPercent(value) {
    return (value * 100).toFixed(2) + '%';
  }

  // Indsæt pros i DOM
  const proContainer = document.getElementById('proContainer');
  pros.forEach((pro, idx) => {
    const proCard = document.createElement('article');
    proCard.className = 'pro-card';
    proCard.innerHTML = `
      <h2 class="pro-name">${pro.name}</h2>
      <ul class="stocks-list">
        ${pro.stocks.map(stock => `
          <li>
            <span class="stock-name">${stock.name}</span>
            <span class="afkast">${formatPercent(stock.afkast)}</span>
          </li>
        `).join('')}
      </ul>
      <button class="analysis-btn" data-index="${idx}">Se analyse</button>
    `;
    proContainer.appendChild(proCard);
  });

  // Modal funktionalitet
  const modalOverlay = document.getElementById('modalOverlay');
  const modalText = document.getElementById('modalText');
  const modalCloseBtn = document.getElementById('modalCloseBtn');

  proContainer.addEventListener('click', e => {
    if(e.target.classList.contains('analysis-btn')) {
      const idx = e.target.getAttribute('data-index');
      modalText.innerHTML = pros[idx].analysis;
      modalOverlay.classList.add('active');
      modalOverlay.focus();
    }
  });

  modalCloseBtn.addEventListener('click', () => {
    modalOverlay.classList.remove('active');
  });

  modalOverlay.addEventListener('click', e => {
    if(e.target === modalOverlay) {
      modalOverlay.classList.remove('active');
    }
  });

  // Data til graf (fiktive portefølje værdier over 12 uger)
  const labels = Array.from({length: 12}, (_, i) => `Uge ${i + 1}`);
  const portfolioValues = [100000, 102000, 101500, 103000, 104500, 105000, 106000, 107500, 108000, 110000, 111500, 113000];

  const ctx = document.getElementById('portfolioChart').getContext('2d');
  const portfolioChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [{
        label: 'Porteføljens værdi DKK',
        data: portfolioValues,
        fill: false,
        borderColor: '#003f5c',
        backgroundColor: '#003f5c',
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          onClick: e => e.stopPropagation()  // Deaktiver klik på legend (ingen toggle)
        },
        tooltip: {
          mode: 'index',
          intersect: false,
        }
      },
      interaction: {
        mode: 'nearest',
        intersect: false
      },
      scales: {
        y: {
          beginAtZero: false,
          ticks: {
            callback: value => value.toLocaleString('da-DK', {style: 'currency', currency: 'DKK'})
          },
          title: {
            display: true,
            text: 'DKK'
          }
        },
        x: {
          title: {
            display: true,
            text: 'Uger'
          }
        }
      }
    }
  });
</script>

</body>
</html>
