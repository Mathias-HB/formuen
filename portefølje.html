<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Eksklusiv Portefølje</title>
  <style>
    /* Global styles (samme som index.html) */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f7f9fc;
      color: #333;
    }
    header {
      background-color: #0b1e3d;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
      position: relative;
      z-index: 1000;
    }
    .logo {
      display: flex;
      align-items: center;
    }
    .logo-img {
      height: 88px;
      width: auto;
      display: block;
    }
    nav {
      position: relative;
    }
    ul.menu {
      list-style: none;
      display: flex;
      gap: 2rem;
    }
    ul.menu > li {
      position: relative;
    }
    ul.menu > li > a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem;
      display: block;
      transition: color 0.2s ease;
    }
    ul.menu > li:hover > a {
      color: #00ccff;
    }
    .dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      padding: 1rem;
      border-radius: 6px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      display: none;
      flex-direction: column;
      min-width: 200px;
      z-index: 999;
    }
    .dropdown a {
      color: #0b1e3d;
      text-decoration: none;
      padding: 0.4rem 0;
    }
    .dropdown a:hover {
      color: #0077cc;
    }
    ul.menu > li:hover .dropdown {
      display: flex;
    }

    @media(max-width: 768px) {
      ul.menu {
        flex-direction: column;
        gap: 1rem;
      }
      .dropdown {
        position: static;
        box-shadow: none;
        background: none;
        padding: 0;
      }
      .dropdown a {
        padding-left: 1rem;
      }
    }

    /* Eksklusiv Portefølje side styles */
    main {
      max-width: 900px;
      margin: 40px auto 80px;
      padding: 0 15px;
      color: #0b1e3d;
    }
    header.page-header {
      background: #e9f0f8;
      padding: 30px 20px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(11,30,61,0.1);
      margin-bottom: 40px;
      color: #003f5c;
    }
    header.page-header h1 {
      margin: 0;
      font-weight: 700;
      font-size: 2.5rem;
      letter-spacing: 0.05em;
    }

    #chartWrapper {
      background: white;
      padding: 20px 30px 30px;
      border-radius: 8px;
      box-shadow: 0 5px 12px rgb(11 30 61 / 0.1);
      margin-bottom: 40px;
    }
    canvas {
      max-height: 350px;
      width: 100% !important;
    }

    #proContainer {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
      gap: 24px;
    }
    .pro-card {
      background: white;
      border-radius: 8px;
      padding: 20px 22px;
      box-shadow: 0 2px 8px rgb(11 30 61 / 0.05);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .pro-name {
      font-weight: 700;
      font-size: 1.3rem;
      margin-bottom: 12px;
      color: #2f4b7c;
    }
    .stocks-list {
      list-style: none;
      padding-left: 0;
      margin: 0 0 16px 0;
    }
    .stocks-list li {
      font-size: 0.95rem;
      margin-bottom: 6px;
      color: #556b8b;
      display: flex;
      justify-content: space-between;
    }
    .stock-name {
      font-weight: 600;
      color: #0b1e3d;
    }
    .afkast {
      font-style: italic;
      color: #8fbcbb;
    }
    .analysis-btn {
      background: #003f5c;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 9px 14px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s ease;
      align-self: flex-start;
    }
    .analysis-btn:hover,
    .analysis-btn:focus {
      background: #2f4b7c;
      outline: none;
    }

    /* Modal */
    #modalOverlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(11,30,61,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      padding: 20px;
      z-index: 9999;
    }
    #modalOverlay.active {
      display: flex;
    }
    #modalContent {
      background: white;
      max-width: 680px;
      max-height: 80vh;
      overflow-y: auto;
      padding: 24px 30px;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgb(11 30 61 / 0.2);
      position: relative;
      outline: none;
    }
    #modalCloseBtn {
      position: absolute;
      top: 14px;
      right: 20px;
      font-size: 26px;
      background: none;
      border: none;
      cursor: pointer;
      color: #8fbcbb;
      font-weight: 700;
      transition: color 0.2s ease;
    }
    #modalCloseBtn:hover,
    #modalCloseBtn:focus {
      color: #003f5c;
      outline: none;
    }
    #modalTitle {
      margin-top: 0;
      font-weight: 700;
      color: #003f5c;
      margin-bottom: 16px;
      font-size: 1.8rem;
      border-bottom: 2px solid #8fbcbb;
      padding-bottom: 6px;
    }
    .analysis-section {
      margin-bottom: 22px;
    }
    .analysis-section h3 {
      color: #2f4b7c;
      margin-bottom: 8px;
      font-weight: 700;
      font-size: 1.2rem;
    }
    .analysis-section p {
      line-height: 1.5;
      color: #556b8b;
      font-size: 1rem;
    }

    footer {
      text-align: center;
      padding: 1.5rem;
      background-color: #0b1e3d;
      color: white;
      font-size: 0.9rem;
      margin-top: 4rem;
    }
  </style>
</head>
<body>

<header>
  <div class="logo">
    <img src="FGlogo.png" alt="FormueGuiden logo" class="logo-img" />
  </div>
  <nav>
    <ul class="menu" role="menubar">
      <li role="none">
        <a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false">Blog</a>
        <div class="dropdown" role="menu">
          <a href="begynderguide.html" role="menuitem">Begynderguide</a>
          <a href="formuehistorier.html" role="menuitem">Formuehistorier</a>
          <a href="valg-af-platform.html" role="menuitem">Valg af platform</a>
        </div>
      </li>
      <li role="none">
        <a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false">Eksklusivt</a>
        <div class="dropdown" role="menu">
          <a href="portefølje.html" role="menuitem">Portefølje</a>
          <a href="analyser.html" role="menuitem">Analyser</a>
          <a href="investorer.html" role="menuitem">Investorer</a>
        </div>
      </li>
      <li role="none"><a href="om-os.html" role="menuitem">Om os</a></li>
      <li role="none"><a href="kontakt.html" role="menuitem">Kontakt</a></li>
    </ul>
  </nav>
</header>

<header class="page-header" role="banner" aria-label="Side titel">
  <h1>Eksklusiv Portefølje</h1>
</header>

<main>
  <section id="chartWrapper" aria-label="Porteføljens samlede værdi over 12 uger">
    <canvas id="portfolioChart" role="img" aria-label="Graf over porteføljens værdi"></canvas>
  </section>

  <section id="proContainer" aria-live="polite" aria-label="Liste over investorer og deres aktier">
    <!-- JS indsætter investorer her -->
  </section>
</main>

<footer>
  &copy; 2025 FormueGuiden. Alle rettigheder forbeholdes.
</footer>

<!-- Modal til analyser -->
<div id="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" tabindex="-1">
  <div id="modalContent">
    <button id="modalCloseBtn" aria-label="Luk analyse modal">&times;</button>
    <h2 id="modalTitle">Analyse</h2>
    <div id="modalText"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const chartData = {
    labels: ['Uge 1', 'Uge 2', 'Uge 3', 'Uge 4', 'Uge 5', 'Uge 6', 'Uge 7', 'Uge 8', 'Uge 9', 'Uge 10', 'Uge 11', 'Uge 12'],
    datasets: [{
      label: 'Porteføljens værdi (DKK)',
      data: [10000, 10250, 10500, 10300, 10800, 11000, 11250, 11500, 11700, 12000, 12300, 12500],
      borderColor: '#0b1e3d',
      backgroundColor: 'rgba(11, 30, 61, 0.3)',
      fill: true,
      tension: 0.3,
      pointRadius: 4,
      pointHoverRadius: 6,
      borderWidth: 3,
    }]
  };

  const ctx = document.getElementById('portfolioChart').getContext('2d');
  const portfolioChart = new Chart(ctx, {
    type: 'line',
    data: chartData,
    options: {
      responsive: true,
      plugins: {
        legend: { display: true },
        tooltip: {
          mode: 'index',
          intersect: false,
          callbacks: {
            label: ctx => ctx.parsed.y.toLocaleString('da-DK', { style: 'currency', currency: 'DKK' })
          }
        }
      },
      scales: {
        y: {
          beginAtZero: false,
          ticks: {
            callback: val => val.toLocaleString('da-DK', { style: 'currency', currency: 'DKK' })
          }
        }
      },
      interaction: {
        mode: 'nearest',
        intersect: false
      }
    }
  });

  const proData = [
    {
      navn: "Ole Invest",
      aktier: [
        { navn: "Apple", procent: 15, afkast: "8%" },
        { navn: "Novo Nordisk", procent: 25, afkast: "12%" },
        { navn: "Microsoft", procent: 10, afkast: "5%" }
      ],
      analyse: `<div class="analysis-section">
                  <h3>Strategi</h3>
                  <p>Ole Invest fokuserer på stabile tech- og medicinalaktier med god langsigtet vækst.</p>
                </div>
                <div class="analysis-section">
                  <h3>Risiko</h3>
                  <p>Moderat risiko pga. koncentration i få sektorer.</p>
                </div>`
    },
    {
      navn: "Anna Kapital",
      aktier: [
        { navn: "Tesla", procent: 20, afkast: "15%" },
        { navn: "Vestas", procent: 30, afkast: "10%" },
        { navn: "A.P. Moller", procent: 10, afkast: "7%" }
      ],
      analyse: `<div class="analysis-section">
                  <h3>Strategi</h3>
                  <p>Anna Kapital satser på grøn energi og disruptive teknologier.</p>
                </div>
                <div class="analysis-section">
                  <h3>Risiko</h3>
                  <p>Høj risiko pga. volatilitet i sektorerne.</p>
                </div>`
    }
  ];

  const proContainer = document.getElementById('proContainer');
  proData.forEach((pro, idx) => {
    const card = document.createElement('article');
    card.className = 'pro-card';
    card.setAttribute('tabindex', '0');
    card.setAttribute('aria-labelledby', `proName${idx}`);
    card.innerHTML = `
      <h2 id="proName${idx}" class="pro-name">${pro.navn}</h2>
      <ul class="stocks-list">
        ${pro.aktier.map(stock => `<li><span class="stock-name">${stock.navn}</span><span>${stock.procent}% (<em class="afkast">${stock.afkast}</em>)</span></li>`).join('')}
      </ul>
      <button class="analysis-btn" aria-haspopup="dialog" aria-controls="modalOverlay" aria-expanded="false" data-index="${idx}">Se Analyse</button>
    `;
    proContainer.appendChild(card);
  });

  const modalOverlay = document.getElementById('modalOverlay');
  const modalText = document.getElementById('modalText');
  const modalCloseBtn = document.getElementById('modalCloseBtn');
  const analysisButtons = document.querySelectorAll('.analysis-btn');

  analysisButtons.forEach(button => {
    button.addEventListener('click', () => {
      const idx = button.getAttribute('data-index');
      modalText.innerHTML = proData[idx].analyse;
      modalOverlay.classList.add('active');
      modalCloseBtn.focus();
      button.setAttribute('aria-expanded', 'true');
    });
  });

  modalCloseBtn.addEventListener('click', () => {
    modalOverlay.classList.remove('active');
    analysisButtons.forEach(btn => btn.setAttribute('aria-expanded', 'false'));
  });

  // Luk modal med ESC
  window.addEventListener('keydown', (e) => {
    if (e.key === "Escape" && modalOverlay.classList.contains('active')) {
      modalOverlay.classList.remove('active');
      analysisButtons.forEach(btn => btn.setAttribute('aria-expanded', 'false'));
    }
  });

  // Fokusfangst i modal
  modalOverlay.addEventListener('keydown', e => {
    if (e.key === 'Tab') {
      const focusableElements = modalOverlay.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      const firstElement = focusableElements[0];
      const lastElement = focusableElements[focusableElements.length -1];
      if (e.shiftKey) {
        if (document.activeElement === firstElement) {
          e.preventDefault();
          lastElement.focus();
        }
      } else {
        if (document.activeElement === lastElement) {
          e.preventDefault();
          firstElement.focus();
        }
      }
    }
  });
</script>

</body>
</html>
